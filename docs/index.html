<!doctype html><html lang="en-us"><head><title>Roguelike Browser Boilerplate</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="description" content="Your game description goes here."><link rel="icon" href="icon.png"><script src="https://cdn.jsdelivr.net/npm/rot-js@2/dist/rot.js"></script><script src="https://cdn.jsdelivr.net/gh/chr15m/jsfxr@42a643f/riffwave.js"></script><script src="https://cdn.jsdelivr.net/gh/chr15m/jsfxr@42a643f/sfxr.js"></script><link href="https://cdn.jsdelivr.net/npm/nes.css@2.3.0/css/nes.min.css" rel="stylesheet"><style>@import url(https://fonts.googleapis.com/css2?family=Press+Start+2P);.game-title-text{font-size:64px}*{box-sizing:border-box;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none}html{height:100%;overflow:hidden}body{font-family:'Press Start 2P',cursive;width:100%;height:100%;margin:0 auto;font-size:1.5em;background-color:#222323;color:#eee}@media (max-width:700px),(max-height:820px){body{font-size:.75em}}canvas{image-rendering:optimizeSpeed;image-rendering:crisp-edges;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;-ms-interpolation-mode:nearest-neighbor;image-rendering:pixelated;margin:200px}a{color:#e77}a:hover{color:#faa;text-decoration:none}.nes-container.is-dark{background-color:#222323}.screen{height:100%;width:100%;display:none;flex-direction:column;position:absolute;justify-content:center;align-items:center}.modal{position:absolute;top:0;left:0;bottom:0;right:0;width:100%;height:100%;background-color:#222323}#title{background-image:url(bg.png);background-size:cover;animation:20s para infinite ease}@keyframes para{0%{background-position:0 0}50%{background-position:0 80px}100%{background-position:0 0}}#plate{display:flex;animation:2s plate-fade;opacity:0}#plate>div{display:flex;justify-content:center;align-items:center;text-align:left;padding:40px;border-radius:5px}@keyframes plate-fade{0%{opacity:0}25%{opacity:0}50%{opacity:1}75%{opacity:1}100%{opacity:0}}#plate>div>*+*{margin-left:32px;margin-right:0}@media (max-width:700px),(max-height:820px){#plate>div{flex-direction:column;text-align:center}#plate>div>*+*{margin-left:0;margin-right:0;margin-top:16px}}#game-title{margin-bottom:0;width:900px;max-width:98%}@media (min-width:700px) and (max-height:820px){#game-title{width:900px;max-width:98%;max-height:35vh}}@media (max-height:600px){#game-title{width:500px}}.game-title-animation{animation:2s zoomInDown}@keyframes zoomInDown{0%{opacity:0;transform:scale3d(.1,.1,.1) translate3d(0,-1000px,0);animation-timing-function:cubic-bezier(.55,.055,.675,.19)}60%{opacity:1;transform:scale3d(.475,.475,.475) translate3d(0,60px,0);animation-timing-function:cubic-bezier(.175,.885,.32,1)}}#options{text-align:center;justify-content:center;max-width:90%}#logo{width:100px}#menu{width:400px;max-width:100%;margin-bottom:64px;padding:32px}#menu label{margin-left:-1em;padding-top:.5em;padding-bottom:.5em}.modal>*{max-width:90%;width:400px;margin:50px;text-align:center}@media (max-width:700px),(max-height:820px){.modal>*{margin:10px}}#instructions div>p{text-align:left}#settings div>p{text-align:left}#credits ul{list-style:"> ";padding-left:2em;text-align:left}#credits ul li{margin:.5em 0}.sprite{width:8px;height:8px;image-rendering:optimizeSpeed;image-rendering:crisp-edges;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;-ms-interpolation-mode:nearest-neighbor;image-rendering:pixelated;transform:scale(8);background-image:url(colored_tilemap_packed.png);margin:80px auto}.free{position:absolute}.amulet{background-position:0 -64px}.tomb{background-position:-72px -56px}.ghost{background-position:-72px -8px;margin:0}.empty{background-position:-8px -48px}.float-up{animation:float-up 2s linear}@keyframes float-up{from{transform:scale(8) translate(0,0);opacity:1}to{transform:scale(16) translate(0,-20px);opacity:0}}.grow-fade{animation:grow-fade 2s linear}@keyframes grow-fade{from{transform:translate(0,0) scale(8);opacity:.5}to{transform:translate(0,0) scale(16);opacity:0}}#play{width:400px;max-width:90%}#win{background:url(01coin.gif);background-size:20%}#hud{position:absolute;bottom:0;width:600px;max-width:100%;display:flex;justify-content:space-evenly;padding:24px}#message{position:absolute;top:24px}#message .hit{color:#c01256}#message .miss{color:#ffb570}#inventory{position:absolute;bottom:0;left:0}#inventory .sprite{transform:scale(3);display:inline-block;margin:1em 2em 1em 1em;vertical-align:middle}#inventory li{margin:1em 0}#inventory ul{list-style-type:none;margin:0;padding:0}#inventory>div{display:none}@media (max-width:750px){#inventory{bottom:72px}#hud{width:100%}}#arrows{display:none;position:absolute;right:0;bottom:0}#arrows>*{float:left;font-size:16px;bottom:0;width:60px;height:60px;display:flex;align-items:center;justify-content:center}#arrows>*>span{pointer-events:none}#btn-left{position:absolute;right:7em}#btn-right{position:absolute;right:0}#btn-up{transform:rotate(90deg);position:absolute;right:3.5em;margin-bottom:3.75em}#btn-down{transform:rotate(90deg);position:absolute;right:3.5em}@media (max-width:1024px){#arrows>*{bottom:72px}}.fade-in{animation:fade-in .8s;display:flex}@keyframes fade-in{from{opacity:0}to{opacity:1}}.hide{display:none}.show{display:flex}.fade-out{display:flex;opacity:1;animation:fade-out 3s forwards}@keyframes fade-out{from{opacity:1;display:flex}50%{opacity:1;display:flex}to{opacity:0;display:none}}#link-out{position:absolute;bottom:3em;border-radius:10px;padding:0;font-size:.66em;text-decoration:underline;text-align:center}</style></head><body><div class="screen" id="plate"><div><img src="icon.png" id="logo"><p>Roguelike<br>Browser<br>Boilerplate</p></div></div><div id="title" class="screen"><div class="game-title-animation"><svg id="game-title" viewBox="0 0 700 200" xmlns="http://www.w3.org/2000/svg"><defs><path id="curve" d="M 100 150 C 200 100 500 100 600 150"></path></defs><text stroke-width="10px" stroke="white"><textPath xlink:href="#curve" text-anchor="middle" startOffset="50%"><tspan class="game-title-text">Roguelike</tspan></textPath></text><text fill="#e33" stroke-width="10px"><textPath xlink:href="#curve" text-anchor="middle" startOffset="50%"><tspan class="game-title-text">Roguelike</tspan></textPath></text></svg></div><div id="options"><div id="menu" class="nes-container is-rounded is-dark"><label><input type="radio" value="instructions" class="nes-radio is-dark" name="menu-items" checked> <span>How to play</span></label><br><label><input type="radio" value="settings" class="nes-radio is-dark" name="menu-items"> <span>Settings</span></label><br><label><input type="radio" value="credits" class="nes-radio is-dark" name="menu-items"> <span>Credits</span></label></div></div><button id="play" class="nes-btn is-success action">Play</button> <a id="link-out" href="https://chr15m.itch.io/roguelike-browser-boilerplate" target="_new">Get this boilerplate<br>to make your own game!</a></div><div id="settings" class="screen modal"><p>Settings</p><div class="nes-container is-rounded is-dark"><p>Put your settings menu here.</p></div><button class="nes-btn is-success action">Ok</button></div><div id="credits" class="screen modal"><div class="nes-container is-rounded is-dark"><p>By Your Name</p><p>Made with:</p><p><a href="https://chr15m.itch.io/roguelike-browser-boilerplate" target="_blank">Roguelike Browser Boilerplate</a></p><ul><li>Engine = <a href="https://ondras.github.io/rot.js/hp/" target="_blank">ROT.js</a></li><li>Tiles by <a href="https://kenney.nl/assets/micro-roguelike" target="_blank">kenney.nl</a></li><li>Styles from <a href="https://nostalgic-css.github.io/NES.css/" target="_blank">NESS.css</a></li><li>SFX from <a href="https://sfxr.me/" target="_blank">sfxr.me</a></li><li>Pixel coin by <a href="https://opengameart.org/content/spinning-pixel-coin-0" target="_blank">irmirx</a></li></ul></div><button class="nes-btn is-success action">Ok</button></div><div id="instructions" class="screen modal"><p>Instructions</p><div class="nes-container is-rounded is-dark"><p>You must find The Amulet and avoid getting captured by The Monster</p><p>Use the arrow keys to move around. To look in a chest move over it.</p></div><button class="nes-btn is-success action">Ok</button></div><div id="win" class="screen modal"><p class="nes-container is-rounded is-dark">Win!</p><div class="nes-container is-rounded is-dark"><p></p><div class="sprite amulet"></div><p></p><p>You found The Amulet and won the game!</p></div><button class="nes-btn is-success action">Ok</button></div><div id="lose" class="screen modal"><p>Lose!</p><div class="nes-container is-rounded is-dark"><div class="sprite tomb"></div><p>Oh no, The Monster got you.</p><p>You're dead.</p></div><button class="nes-btn is-success action">Ok</button></div><div id="game" class="screen"><div id="canvas"></div><div id="message" class="nes-container is-rounded is-dark hide"></div><div id="hud" class="nes-container is-rounded is-dark"></div><div id="inventory" class="nes-container is-rounded is-dark"><div><p>Example inventory</p><ul></ul><span class="toggle">X</span></div><span class="toggle">i</span></div><div id="arrows"><div id="btn-left" class="nes-container is-rounded is-dark"><span>&lt;</span></div><div id="btn-up" class="nes-container is-rounded is-dark"><span>&lt;</span></div><div id="btn-down" class="nes-container is-rounded is-dark"><span>&gt;</span></div><div id="btn-right" class="nes-container is-rounded is-dark"><span>&gt;</span></div></div></div><script id="main">!function(e){const t=document.createElement("img");t.src="colored_tilemap_packed.png";const n={layout:"tile",bg:"transparent",tileWidth:8,tileHeight:8,tileSet:t,tileMap:{"@":[40,0],".":[32,32],M:[88,0],"*":[72,24],g:[64,40],x:[56,32],p:[56,64],a:[40,32],b:[32,40],c:[40,40],d:[48,40],e:[56,40],T:[72,56],"╔":[0,72],"╗":[24,72],"╝":[72,72],"╚":[48,72],"═":[8,72],"║":[32,72],o:[40,72]},width:25,height:40},o=[".","*","g"],i=o.concat(["M","╔","╗","╚","╝","═","║"]),s={rubber:"5EoyNVaezhPnpFZjpkcJkF8FNCioPncLoztbSHU4u9wDQ8W3P7puffRWvGMnrLRdHa61kGcwhZK3RdoDRitmtwn4JjrQsZCZBmDQgkP5uGUGk863wbpRi1xdA",step:"34T6PkwiBPcxMGrK7aegATo5WTMWoP17BTc6pwXbwqRvndwRjGYXx6rG758rLSU5suu35ZTkRCs1K2NAqyrTZbiJUHQmra9qvbBrSdbBbJ7JvmyBFVDo6eiVD",choice:"34T6PkzXyyB6jHiwFztCFWEWsogkzrhzAH3FH2d97BCuFhqmZgfuXG3xtz8YYSKMzn95yyX8xZXJyesKmpcjpEL3dPP5h2e8mt5MmhExAksyqZyqgavBgsWMd",hide:"34T6PkzXyyB6jHiwFztCFWEniygA1GJtjsQuGxcd38JLDquhRqTB28dQgigseMjQSjSY14Z3aBmAtzz9KWcJZ2o9S1oCcgqQY4dxTAXikS7qCs3QJ3KuWJUyD",empty:"111112RrwhZ2Q7NGcdAP21KUHHKNQa3AhmK4Xea8mbiXfzkxr9aX41M8XYt5xYaaLeo9iZdUKUVL3u2N6XASue2wPv2wCCDy6W6TeFiUjk3dXSzFcBY7kTAM",hit:"34T6Pks4nddGzchAFWpSTRAKitwuQsfX8bfzRpJx5eDR7NSqxeeLMEkLjcuwvTCDS1ve7amXBg4eipzDdgKWoYnJBsQVESZh2X1DFV2GWybY5bAihB2EdHsbd",miss:"8R25jogvbp3Qy6A4GTPxRP4aT2SywwsAgoJ2pKmxUFMExgNashjgd311MnmZ2ThwrPQz71LA53QCfFmYQLHaXo6SocUv4zcfNAU5SFocZnoQSDCovnjpioNz3",win:"34T6Pkv34QJsqDqEa8aV4iwF2LnASMc3683oFUPKZic6kVUHvwjUQi6rz8qNRUHRs34cu37P5iQzz2AzipW3DHMoG5h4BZgDmZnyLhsXgPKsq2r4Fb2eBFVuR",lose:"7BMHBGHKKnn7bgcmGprqiBmpuRaTytcd4JS9eRNDzUTRuQy8BTBzs5g8XzS7rrp4C9cNeSaqAtWR9qdvXvtnWVTmTC8GXgDuCXD2KyHJNXzfUahbZrce8ibuy",kill:"7BMHBGKMhg8NZkxKcJxNfTWXKtMPiZVNsLR4aPEAghCSpz5ZxpjS5k4j4ZQpJ65UZnHSr4R2d7ALCHJe41pAS2ZPjauM7SveudhDGAxw2dhXpiNwEhG8xUYkX"};for(let e in s)s[e]=new SoundEffect(s[e]).generate().getAudio();const c={38:0,33:1,39:2,34:3,40:4,35:5,37:6,36:7},r={0:6,1:0,2:2,3:4},l={"btn-left":6,"btn-right":2,"btn-up":0,"btn-down":4},u={display:null,map:{},engine:null,scheduler:null,player:null,monster:null,amulet:null,cleanup:function(){p(u),S("#play").removeEventListener(L,X)}};function d(e){e.map={},e.display=new ROT.Display(n),function(e){S("#canvas").innerHTML="",S("#canvas").appendChild(e),S("#canvas").addEventListener(L,H);S("#arrows").addEventListener(L,P);M("game")}(e.display.getContainer()),function(e){const t=new ROT.Map.Digger(n.width,n.height),o=[],s=[];t.create(function(t,n,i){const a=t+","+n;i?s.push(a):(e.map[a]=".",o.push(a))}.bind(e)),function(e,t){for(let n=0;n<15;n++){const o=h(t);n?e.map[o]=ROT.RNG.getItem(["*","g"]):(e.amulet=o,e.map[o]="*")}}(e,o),function(e,t){for(let n=0;n<100;n++)if(t.length){const n=h(t);e[n]=ROT.RNG.getItem("abcde")}}(e.map,s),function(e,t){const n=t.getRooms();for(let t=0;t<n.length;t++){const o=n[t],s=o.getLeft()-1,a=o.getRight()+1,c=o.getTop()-1,r=o.getBottom()+1;e[s+","+c]="╔",e[a+","+c]="╗",e[s+","+r]="╚",e[a+","+r]="╝";for(let t=o.getLeft();t<=o.getRight();t++){const n=t+","+c,o=t+","+r;-1==i.indexOf(e[n])&&(e[n]="═"),-1==i.indexOf(e[o])&&(e[o]="═")}for(let t=o.getTop();t<=o.getBottom();t++){const n=s+","+t,o=a+","+t;-1==i.indexOf(e[n])&&(e[n]="║"),-1==i.indexOf(e[o])&&(e[o]="║")}}}(e.map,t),function(e,t){for(let n in t){const o=f(n);e.draw(o[0],o[1],t[n])}}(e.display,e.map),e.player=y(m,o),e.monster=y(T,o),k(e.player._x,e.player._y,e)}(e),e.scheduler=new ROT.Scheduler.Simple,e.scheduler.add(e.player,!0),e.scheduler.add(e.monster,!0),function(e,t){const o=S("#inventory ul");o.innerHTML="",e.forEach((function(e){const i=n.tileMap[e[0]],s=e[1];z(o,C("li",{onclick:t.bind(null,e),className:"inventory-item"},[C("div",{className:"sprite",style:"background-position: -"+i[0]+"px -"+i[1]+"px;"}),s]))}))}(e.player.inventory,(function(e,t){D(e[1]+" selected"),A(t,!0)})),_(e.player.stats),e.engine=new ROT.Engine(e.scheduler),e.engine.start()}function p(e){E(e),e.engine&&(e.engine.lock(),e.display=null,e.map={},e.engine=null,e.scheduler.clear(),e.scheduler=null,e.player=null,e.monster=null,e.amulet=null),N(!0),M("title")}function h(e){const t=Math.floor(ROT.RNG.getUniform()*e.length);return e.splice(t,1)[0]}function f(e){const t=e.split(",");return[parseInt(t[0]),parseInt(t[1])]}function y(e,t){const n=f(h(t)),o=e(n[0],n[1]);return o.draw(),o}function m(e,t){return{_x:e,_y:t,character:"@",inventory:[["x","Axe (+5)"],["p","Potion"]],stats:{hp:10,xp:1,gold:0},act:()=>{u.engine.lock(),window.addEventListener("keydown",g)},draw:x}}function g(e){e.preventDefault();const t=e.keyCode;if(!(t in c))return;w(ROT.DIRS[8][c[t]])}function v(e){const t=e._x+","+e._y;let n=!1;t==u.amulet?function(){for(let e=0;e<5;e++)setTimeout((function(){s.win.play()}),100*e);p(u),M("win")}():"g"==u.map[t]?(u.player.stats.gold+=1,_(u.player.stats),D("You found gold!"),s.win.play(),n=!0):"*"==u.map[t]&&(D("This chest is empty."),s.empty.play(),n=!0),n&&(u.map[t]=".")}function w(e){const t=u.player;return function(e,t){const n=u.player,i=e+","+t;if(-1==o.indexOf(u.map[i]))return;const a=u.monster;if(a&&a._x==e&&a._y==t)return void b(a);u.display.draw(n._x,n._y,u.map[n._x+","+n._y]),n._x=e,n._y=t,n.draw(),k(e,t,u),N(),window.removeEventListener("keydown",g),u.engine.unlock(),s.step.play(),v(n)}(t._x+e[0],t._y+e[1])}function x(){u.display.draw(this._x,this._y,this.character)}function T(e,t){return{_x:e,_y:t,character:"M",stats:{hp:14},act:R,draw:x}}function R(){const e=this,t=u.player,n=u.map,i=u.display,s=new ROT.Path.AStar(t._x,t._y,(function(e,t){return-1!=o.indexOf(n[e+","+t])}),{topology:4}),a=[];s.compute(e._x,e._y,(function(e,t){a.push([e,t])})),a.shift(),a.length<=1?b(e):(i.draw(e._x,e._y,n[e._x+","+e._y]),e._x=a[0][0],e._y=a[0][1],e.draw())}function b(e){let t=[];const n=ROT.RNG.getItem([1,2,3,4,5,6]);var o;if(n>3?(t.push("You hit the monster."),e.stats.hp-=n,s.hit.play(),(o=e).stats.hp<1&&(u.display.draw(o._x,o._y,u.map[o._x+","+o._y]),u.scheduler.remove(o),u.monster=null,s.kill.play())):(s.miss.play(),t.push("You missed the monster.")),e.stats.hp>0){const e=ROT.RNG.getItem([1,2,3,4,5,6]);e>3?(t.push("The monster hit."),u.player.stats.hp-=e,_(u.player.stats),setTimeout((function(){s.hit.play()}),250),u.player.stats.hp<1&&function(){const e=u.player;u.display.draw(e._x,e._y,"T");const t=z(S("#game"),C("div",{className:"sprite ghost free float-up"}));E(u),s.lose.play(),setTimeout((function(){var e;(e=t).parentNode.removeChild(e),p(u),M("lose")}),2e3)}()):(t.push("The monster missed."),setTimeout((function(){s.miss.play()}),250))}t&&D(function(e){const t=e.reduce((function(e,t){return e.concat(t.split(" ").map((function(e){const t=e.match(/hit|miss/);return C("span",{className:t?t[0]:""},[e," "])}))).concat(C("br",{}))}),[]);return C("span",{},t)}(t))}const L="ontouchstart"in window?"touchstart":"click",S=document.querySelector.bind(document);function k(e,t,o){S("canvas");const i=window.innerWidth<600?4:6,s=o.touchScreen?-20:0,a=e*-n.tileWidth+n.width*n.tileWidth/2-4,c=t*-n.tileHeight+n.height*n.tileHeight/2+s;canvas&&(canvas.style.transition="transform 0.5s ease-out 0s",o.display.getContainer().getContext("2d").imageSmoothingEnabled=!1,canvas.style.transform="scale("+i+") translate3d("+Math.floor(a)+"px,"+Math.floor(c)+"px,0px)")}function E(e){e.engine&&(e.engine.lock(),e.scheduler.clear(),window.removeEventListener("keydown",g),S("#canvas").removeEventListener(L,H),S("#arrows").removeEventListener(L,P))}function M(e,t){t&&t.preventDefault();const n=S("#"+e),o=S("#"+e+">.action");document.querySelectorAll(".screen").forEach((function(e){e.classList.remove("show"),e.classList.add("hide")})),n.classList.remove("hide"),n.classList.remove("show"),n.offsetHeight,n.classList.add("show"),o&&o.focus()}function _(e){const t=S("#hud");t.innerHTML="";for(let n in e)z(t,C("span",{},[n.toUpperCase()+": "+e[n]]))}function A(e,t){const n=e.target.className;if("sprite"!=n&&"inventory-item"!=n||t){e.preventDefault();const t=S("#inventory>span"),n=S("#inventory>div");return"none"==t.style.display?(t.style.display="block",n.style.display="none"):(t.style.display="none",n.style.display="block"),!1}}function D(e){const t=S("#message");t.classList.remove("fade-out"),t.classList.add("show"),"string"==typeof e?t.textContent=e:(t.innerHTML="",t.appendChild(e))}function N(e){const t=S("#message");e?(t.classList.remove("show"),t.classList.remove("fade-out")):t.className.match("show")&&(t.classList.remove("show"),t.classList.add("fade-out"),t.onanimationend=function(){t.classList.remove("fade-out")})}function C(e,t,n){const o=document.createElement(e);for(a in t)o[a]=t[a];return(n||[]).forEach((function(e){"string"==typeof e?o.appendChild(document.createTextNode(e)):z(o,e)})),o}function z(e,t){return e.appendChild(t),t}function H(e){if(e.preventDefault(),u.touchScreen)return;const t=S("#game"),n=e.touches?e.touches[0].clientX:e.clientX,o=e.touches?e.touches[0].clientY:e.clientY,i=n-t.offsetWidth/2,s=o-t.offsetHeight/2-(game.touchScreen?-20:0)*window.devicePixelRatio,a=Math.ceil(Math.floor((Math.atan2(s,i)+Math.PI)/(Math.PI/4))%7/2);w(ROT.DIRS[8][r[a]])}function P(e){e.preventDefault();w(ROT.DIRS[8][l[e.target.id]])}function X(e){M("game"),s.rubber.play(),e.touches&&(S("#arrows").style.display="block",u.touchScreen=!0),d(u)}function B(e,t){t.preventDefault();M(e.getAttribute("value")),s.choice.play()}function G(e){e.preventDefault(),M("title"),s.hide.play()}NodeList.prototype.forEach=Array.prototype.forEach,document.querySelectorAll(".game-title-text").forEach((function(e){e.textContent="My Rogue"})),S("#play").addEventListener(L,X),e.rbb?e.rbb.cleanup():(S("#plate").addEventListener("animationend",M.bind(null,"title")),document.querySelectorAll("#options #menu input").forEach((function(e){e.addEventListener("touchstart",B.bind(null,e)),e.addEventListener("click",B.bind(null,e))})),S("#inventory").addEventListener(L,A),document.querySelectorAll(".modal button.action").forEach((function(e){e.addEventListener(L,G)}))),e.rbb=u}(window);</script></body></html>
