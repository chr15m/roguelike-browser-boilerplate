<!doctype html><html lang="en-us"><head><title>Roguelike Browser Boilerplate</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="description" content="Your game description goes here."><link rel="icon" href="icon.png"><script src="https://cdn.jsdelivr.net/npm/rot-js@2/dist/rot.js"></script><script src="https://cdn.jsdelivr.net/gh/chr15m/jsfxr@42a643f/riffwave.js"></script><script src="https://cdn.jsdelivr.net/gh/chr15m/jsfxr@42a643f/sfxr.js"></script><link href="https://cdn.jsdelivr.net/npm/nes.css@2.3.0/css/nes.min.css" rel="stylesheet"><style>@import url(https://fonts.googleapis.com/css2?family=Press+Start+2P);.game-title-text{font-size:64px}*{box-sizing:border-box;touch-action:manipulation;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none}html{height:100%;overflow:hidden}body{font-family:'Press Start 2P',cursive;width:100%;height:100%;margin:0 auto;font-size:1.5em;background-color:#222323;color:#eee}@media (max-width:700px),(max-height:820px){body{font-size:.75em}}canvas{image-rendering:optimizeSpeed;image-rendering:crisp-edges;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;-ms-interpolation-mode:nearest-neighbor;image-rendering:pixelated}a{color:#e77}a:hover{color:#faa;text-decoration:none}.nes-container.is-rounded.is-dark{border-image-slice:9 9 9 9 fill;border-image-source:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAphgAAKYYBIuzfjAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAABgSURBVEiJY2AYBQQAIzGK/v///x+rZkZGgvqZSHURqYDmFrDgkkAOFikpZYJqcAXX0A8iFG8REyy4wLNndxGGIgXX0A+iUQsIApxlCTEpClfKQQbDOIiQwcgurkcBQQAARlMedugABy8AAAAASUVORK5CYII=);background-color:transparent;border-image-repeat:stretch}.nes-container.is-fake-rounded.is-dark::after{background:0 0}.screen{height:100%;width:100%;display:none;flex-direction:column;position:absolute;justify-content:center;align-items:center}.modal{position:absolute;top:0;left:0;bottom:0;right:0;width:100%;height:100%;background-color:#222323}#title{background-image:url(bg.png);background-size:cover;animation:20s para infinite ease}@keyframes para{0%{background-position:0 0}50%{background-position:0 80px}100%{background-position:0 0}}#plate{display:flex;animation:2s plate-fade;opacity:0}#plate>div{display:flex;justify-content:center;align-items:center;text-align:left;padding:40px;border-radius:5px}@keyframes plate-fade{0%{opacity:0}25%{opacity:0}50%{opacity:1}75%{opacity:1}100%{opacity:0}}#plate>div>*+*{margin-left:32px;margin-right:0}@media (max-width:700px),(max-height:820px){#plate>div{flex-direction:column;text-align:center}#plate>div>*+*{margin-left:0;margin-right:0;margin-top:16px}}#game-title{margin-bottom:0;width:900px;max-width:98%}@media (min-width:700px) and (max-height:820px){#game-title{width:900px;max-width:98%;max-height:35vh}}@media (max-height:600px){#game-title{width:500px}}.game-title-animation{animation:2s zoomInDown}@keyframes zoomInDown{0%{opacity:0;transform:scale3d(.1,.1,.1) translate3d(0,-1000px,0);animation-timing-function:cubic-bezier(.55,.055,.675,.19)}60%{opacity:1;transform:scale3d(.475,.475,.475) translate3d(0,60px,0);animation-timing-function:cubic-bezier(.175,.885,.32,1)}}#options{text-align:center;justify-content:center;max-width:90%}#logo{width:100px}#menu{width:400px;max-width:100%;margin-bottom:64px;padding:32px}#menu label{margin-left:-1em;padding-top:.5em;padding-bottom:.5em}.modal>*{max-width:90%;width:400px;margin:50px;text-align:center}@media (max-width:700px),(max-height:820px){.modal>*{margin:10px}}#instructions div>p{text-align:left}#settings div>p{text-align:left}#credits ul{list-style:"> ";padding-left:2em;text-align:left}#credits ul li{margin:.5em 0}.sprite{display:block;width:8px;height:8px;image-rendering:optimizeSpeed;image-rendering:crisp-edges;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;-ms-interpolation-mode:nearest-neighbor;image-rendering:pixelated;transform:scale(8);background-image:url(colored_tilemap_packed.png);margin:80px auto}.free{position:absolute;transform:none}.amulet{background-position:0 -64px}.tomb{background-position:-72px -56px}.ghost{background-position:-72px -8px;margin:0}.empty{background-position:-8px -48px}.float-up{animation:float-up 2s linear forwards}@keyframes float-up{from{transform:scale(1) translate(0,0);opacity:1}to{transform:scale(3) translate(0,-20px);opacity:0}}.grow-fade{animation:grow-fade 2s linear}@keyframes grow-fade{from{transform:translate(0,0) scale(8);opacity:.5}to{transform:translate(0,0) scale(16);opacity:0}}#play{width:400px;max-width:90%}#win{background:url(01coin.gif);background-size:20%}#hud{position:absolute;bottom:0;width:600px;max-width:100%;display:flex;justify-content:space-evenly;padding:24px}#message{position:absolute;top:24px;flex-direction:column}#message .hit{color:#c01256}#message .miss{color:#ffb570}#inventory{position:absolute;bottom:0;left:0}#inventory .sprite{transform:scale(3);display:inline-block;margin:1em 2em 1em 1em;vertical-align:middle}#inventory li{margin:1em 0}#inventory ul{list-style-type:none;margin:0;padding:0}#inventory>div{display:none}@media (max-width:750px){#inventory{bottom:72px}#hud{width:100%}}#arrows{display:none;position:absolute;right:0;bottom:0}#arrows>*{float:left;font-size:16px;bottom:0;width:60px;height:60px;display:flex;align-items:center;justify-content:center}#arrows>*>span{pointer-events:none}#btn-left{position:absolute;right:7em}#btn-right{position:absolute;right:0}#btn-up{transform:rotate(90deg);position:absolute;right:3.5em;margin-bottom:3.75em}#btn-down{transform:rotate(90deg);position:absolute;right:3.5em}#btn-skip{position:absolute;right:0;margin-bottom:3.75em;padding:0}@media (max-width:1024px){#arrows>*{bottom:72px}}.fade-in{animation:fade-in .8s;display:flex}@keyframes fade-in{from{opacity:0}to{opacity:1}}.hide{display:none}.show{display:flex}.fade-out{display:flex;opacity:1;animation:fade-out 3s forwards}@keyframes fade-out{from{opacity:1;display:flex}50%{opacity:1;display:flex}to{opacity:0;display:none}}#link-out{position:absolute;bottom:3em;border-radius:10px;padding:0;font-size:.66em;text-decoration:underline;text-align:center}</style></head><body><div class="screen" id="plate"><div><img src="icon.png" id="logo"><p>Roguelike<br>Browser<br>Boilerplate</p></div></div><div id="title" class="screen"><div class="game-title-animation"><svg id="game-title" viewBox="0 0 700 200" xmlns="http://www.w3.org/2000/svg"><defs><path id="curve" d="M 100 150 C 200 100 500 100 600 150"></path></defs><text stroke-width="10px" stroke="white"><textPath xlink:href="#curve" text-anchor="middle" startOffset="50%"><tspan class="game-title-text">Roguelike</tspan></textPath></text><text fill="#e33" stroke-width="10px"><textPath xlink:href="#curve" text-anchor="middle" startOffset="50%"><tspan class="game-title-text">Roguelike</tspan></textPath></text></svg></div><div id="options"><div id="menu" class="nes-container is-rounded is-dark"><label><input type="radio" value="instructions" class="nes-radio is-dark" name="menu-items" checked> <span>Instructions</span></label><br><label><input type="radio" value="settings" class="nes-radio is-dark" name="menu-items"> <span>Settings</span></label><br><label><input type="radio" value="credits" class="nes-radio is-dark" name="menu-items"> <span>Credits</span></label></div></div><button id="play" class="nes-btn is-success action">Play</button> <a id="link-out" href="https://chr15m.itch.io/roguelike-browser-boilerplate" target="_new">Get this boilerplate<br>to make your own game!</a></div><div id="settings" class="screen modal"><p>Settings</p><div class="nes-container is-rounded is-dark"><p>Put your settings menu here.</p></div><button class="nes-btn is-success action">Ok</button></div><div id="credits" class="screen modal"><div class="nes-container is-rounded is-dark"><p>By Your Name</p><p>Made with:</p><p><a href="https://chr15m.itch.io/roguelike-browser-boilerplate" target="_blank">Roguelike Browser Boilerplate</a></p><ul><li>Engine = <a href="https://ondras.github.io/rot.js/hp/" target="_blank">ROT.js</a></li><li>Tiles by <a href="https://kenney.nl/assets/micro-roguelike" target="_blank">kenney.nl</a></li><li>Styles from <a href="https://nostalgic-css.github.io/NES.css/" target="_blank">NESS.css</a></li><li>SFX from <a href="https://sfxr.me/" target="_blank">sfxr.me</a></li><li>Pixel coin by <a href="https://opengameart.org/content/spinning-pixel-coin-0" target="_blank">irmirx</a></li></ul></div><button class="nes-btn is-success action">Ok</button></div><div id="instructions" class="screen modal"><p>Instructions</p><div class="nes-container is-rounded is-dark"><p>You must find The Amulet and avoid getting captured by The Monster</p><p>Use the arrow keys to move around. To look in a chest move over it.</p></div><button class="nes-btn is-success action">Ok</button></div><div id="win" class="screen modal"><p class="nes-container is-rounded is-dark">Win!</p><div class="nes-container is-rounded is-dark"><p></p><div class="sprite amulet"></div><p></p><p>You found The Amulet and won the game!</p><p>You had <span class="gold-stat"></span> gold and <span class="xp-stat"></span> XP.</p></div><button class="nes-btn is-success action">Ok</button></div><div id="lose" class="screen modal"><p>Lose!</p><div class="nes-container is-rounded is-dark"><div class="sprite tomb"></div><p>Oh no, The Monster got you.</p><p>You're dead.</p><p>You had <span class="gold-stat"></span> gold and <span class="xp-stat"></span> XP.</p></div><button class="nes-btn is-success action">Ok</button></div><div id="game" class="screen"><div id="canvas"></div><div id="message" class="nes-container is-rounded is-dark hide"></div><div id="hud" class="nes-container is-rounded is-dark"></div><div id="inventory" class="nes-container is-rounded is-dark"><div><p>Example inventory</p><ul></ul><span class="toggle">X</span></div><span class="toggle">i</span></div><div id="arrows"><div id="btn-left" class="nes-container is-rounded is-dark"><span>&lt;</span></div><div id="btn-up" class="nes-container is-rounded is-dark"><span>&lt;</span></div><div id="btn-down" class="nes-container is-rounded is-dark"><span>&gt;</span></div><div id="btn-right" class="nes-container is-rounded is-dark"><span>&gt;</span></div><div id="btn-skip" class="nes-container is-rounded is-dark"><span>.</span></div></div></div><script id="main">!function(e){const t=document.createElement("img");t.src="colored_tilemap_packed.png";const n={layout:"tile",bg:"transparent",tileWidth:8,tileHeight:8,tileSet:t,tileMap:{"@":[40,0],".":[32,32],M:[88,0],"*":[72,24],g:[64,40],x:[56,32],p:[56,64],a:[40,32],b:[32,40],c:[40,40],d:[48,40],e:[56,40],T:[72,56],"╔":[0,72],"╗":[24,72],"╝":[72,72],"╚":[48,72],"═":[8,72],"║":[32,72],o:[40,72]},width:25,height:40},o=[".","*","g"],i=o.concat(["M","╔","╗","╚","╝","═","║"]),r={rubber:"5EoyNVaezhPnpFZjpkcJkF8FNCioPncLoztbSHU4u9wDQ8W3P7puffRWvGMnrLRdHa61kGcwhZK3RdoDRitmtwn4JjrQsZCZBmDQgkP5uGUGk863wbpRi1xdA",step:"34T6PkwiBPcxMGrK7aegATo5WTMWoP17BTc6pwXbwqRvndwRjGYXx6rG758rLSU5suu35ZTkRCs1K2NAqyrTZbiJUHQmra9qvbBrSdbBbJ7JvmyBFVDo6eiVD",choice:"34T6PkzXyyB6jHiwFztCFWEWsogkzrhzAH3FH2d97BCuFhqmZgfuXG3xtz8YYSKMzn95yyX8xZXJyesKmpcjpEL3dPP5h2e8mt5MmhExAksyqZyqgavBgsWMd",hide:"34T6PkzXyyB6jHiwFztCFWEniygA1GJtjsQuGxcd38JLDquhRqTB28dQgigseMjQSjSY14Z3aBmAtzz9KWcJZ2o9S1oCcgqQY4dxTAXikS7qCs3QJ3KuWJUyD",empty:"111112RrwhZ2Q7NGcdAP21KUHHKNQa3AhmK4Xea8mbiXfzkxr9aX41M8XYt5xYaaLeo9iZdUKUVL3u2N6XASue2wPv2wCCDy6W6TeFiUjk3dXSzFcBY7kTAM",hit:"34T6Pks4nddGzchAFWpSTRAKitwuQsfX8bfzRpJx5eDR7NSqxeeLMEkLjcuwvTCDS1ve7amXBg4eipzDdgKWoYnJBsQVESZh2X1DFV2GWybY5bAihB2EdHsbd",miss:"8R25jogvbp3Qy6A4GTPxRP4aT2SywwsAgoJ2pKmxUFMExgNashjgd311MnmZ2ThwrPQz71LA53QCfFmYQLHaXo6SocUv4zcfNAU5SFocZnoQSDCovnjpioNz3",win:"34T6Pkv34QJsqDqEa8aV4iwF2LnASMc3683oFUPKZic6kVUHvwjUQi6rz8qNRUHRs34cu37P5iQzz2AzipW3DHMoG5h4BZgDmZnyLhsXgPKsq2r4Fb2eBFVuR",lose:"7BMHBGHKKnn7bgcmGprqiBmpuRaTytcd4JS9eRNDzUTRuQy8BTBzs5g8XzS7rrp4C9cNeSaqAtWR9qdvXvtnWVTmTC8GXgDuCXD2KyHJNXzfUahbZrce8ibuy",kill:"7BMHBGKMhg8NZkxKcJxNfTWXKtMPiZVNsLR4aPEAghCSpz5ZxpjS5k4j4ZQpJ65UZnHSr4R2d7ALCHJe41pAS2ZPjauM7SveudhDGAxw2dhXpiNwEhG8xUYkX"};for(let e in r)r[e]=new SoundEffect(r[e]).generate().getAudio();const s={38:0,33:1,39:2,34:3,40:4,35:5,37:6,36:7},l={0:6,1:0,2:2,3:4},c={"btn-left":6,"btn-right":2,"btn-up":0,"btn-down":4},u={};var d=null;const p={display:null,map:{},items:{},engine:null,scheduler:null,player:null,monsters:null,amulet:null,lastArrow:null,arrowInterval:null,arrowListener:null,cleanup:function(){h(p),A("#play").removeEventListener(E,O)}};function f(e){e.map={},e.items={},e.display=new ROT.Display(n),function(e){A("#canvas").innerHTML="",A("#canvas").appendChild(e),window.onkeydown=K,window.onkeyup=Q,A("#canvas").addEventListener(E,q);document.ontouchstart=W,document.ontouchend=Q;clearInterval(d),d=setInterval(J,25),C("game")}(e.display.getContainer()),function(e){const t=new ROT.Map.Digger(n.width,n.height),o=[],a=[];t.create(function(t,n,i){const r=t+","+n;i?a.push(r):(e.map[r]=".",o.push(r))}.bind(e)),function(e,t){for(let n=0;n<15;n++){const o=m(t);n?e.items[o]=ROT.RNG.getItem(["*","g"]):(e.amulet=o,e.items[o]="*")}}(e,o),function(e,t){for(let n=0;n<100;n++)if(t.length){const n=m(t);e[n]=ROT.RNG.getItem("abcde")}}(e.map,a),function(e,t){const n=t.getRooms();for(let t=0;t<n.length;t++){const o=n[t],a=o.getLeft()-1,r=o.getRight()+1,s=o.getTop()-1,l=o.getBottom()+1;e[a+","+s]="╔",e[r+","+s]="╗",e[a+","+l]="╚",e[r+","+l]="╝";for(let t=o.getLeft();t<=o.getRight();t++){const n=t+","+s,o=t+","+l;-1==i.indexOf(e[n])&&(e[n]="═"),-1==i.indexOf(e[o])&&(e[o]="═")}for(let t=o.getTop();t<=o.getBottom();t++){const n=a+","+t,o=r+","+t;-1==i.indexOf(e[n])&&(e[n]="║"),-1==i.indexOf(e[o])&&(e[o]="║")}}}(e.map,t),e.player=v(w,o),e.monsters=[v(L,o)];for(let t in e.map)g(e,t);_(e.player._x,e.player._y,e)}(e),e.scheduler=new ROT.Scheduler.Simple,e.scheduler.add(e.player,!0),e.monsters.map(t=>e.scheduler.add(t,!0)),H(e.player.inventory),z(e.player.stats),e.engine=new ROT.Engine(e.scheduler),e.engine.start()}function h(e){D(e),e.engine&&(e.engine.lock(),e.display=null,e.map={},e.items={},e.engine=null,e.scheduler.clear(),e.scheduler=null,e.player=null,e.monsters=null,e.amulet=null),B(!0),C("title")}function m(e){const t=Math.floor(ROT.RNG.getUniform()*e.length);return e.splice(t,1)[0]}function y(e){const t=e.split(",");return[parseInt(t[0]),parseInt(t[1])]}function g(e,t,n){const o=e.map;if(o[t]){const r=y(t),s=R(r[0],r[1]),l=(a=r[0],i=r[1],p.player&&p.player._x==a&&p.player._y==i?p.player:null),c=e.display,u=e.items,d=[o[t],u[t]];d.push(s&&s!=n?s.character:null),d.push(l&&l!=n?l.character:null),c.draw(r[0],r[1],d.filter(e=>e))}var a,i}function v(e,t){const n=y(m(t));return e(n[0],n[1])}function w(e,t){return{_x:e,_y:t,character:"@",name:"you",inventory:[["x","Axe (+5)"],["p","Potion"]],stats:{hp:10,xp:1,gold:0},act:()=>{p.engine.lock(),p.arrowListener||(document.addEventListener("arrow",U),p.arrowListener=!0)}}}function x(e){const t=e._x+","+e._y;t==p.amulet?function(){p.engine.lock();for(let e=0;e<5;e++)setTimeout((function(){r.win.play()}),100*e);G(p.player.stats.xp,p.player.stats.gold),h(p),C("win")}():"g"==p.items[t]?(p.player.stats.gold+=1,z(p.player.stats),X("You found gold!"),r.win.play(),delete p.items[t]):"*"==p.items[t]&&(X("This chest is empty."),r.empty.play(),delete p.items[t]),g(p,t)}function b(e){const t=p.player;return function(e,t){const n=p.player,a=e+","+t;if(-1==o.indexOf(p.map[a]))return;const i=R(e,t);if(i)S(n,i),setTimeout((function(){p.engine.unlock()}),250);else{B(),g(p,n._x+","+n._y,n),n._x=e,n._y=t;for(let e in p.map)g(p,e);_(e,t,p),window.removeEventListener("arrow",U),p.engine.unlock(),r.step.play(),x(n)}}(t._x+e[0],t._y+e[1])}function L(e,t){return{_x:e,_y:t,character:"M",name:"the monster",stats:{hp:14},act:T}}function T(){const e=this,t=p.player,n=p.map,a=(p.display,new ROT.Path.AStar(t._x,t._y,(function(e,t){return-1!=o.indexOf(n[e+","+t])}),{topology:4})),i=[];a.compute(e._x,e._y,(function(e,t){i.push([e,t])})),i.shift(),i.length<=1?S(e,t):(g(p,e._x+","+e._y,e),e._x=i[0][0],e._y=i[0][1],g(p,e._x+","+e._y))}function R(e,t){if(p.monsters&&p.monsters.length)for(let n=0;n<p.monsters.length;n++){const o=p.monsters[n];if(o&&o._x==e&&o._y==t)return o}}function k(e){if(e.stats.hp<1){if(e!=p.player){e._x,e._y;return function(e){const t=e._x+","+e._y;p.scheduler.remove(e),p.monsters=p.monsters.filter(t=>t!=e),g(p,t)}(e),r.kill.play(),!0}X("You died!"),function(){p.engine.lock();const e=p.player;e.character="T",g(p,e._x+","+e._y);!function(e){const t=n.tileWidth,o=n.tileHeight,a="left:"+e[0]*t+"px;",i="top:"+e[1]*o+"px;",r=I("div",{className:"sprite ghost free float-up",style:a+i});r.onanimationend=function(){var e;(e=r).parentNode.removeChild(e)},Z(A("#canvas"),r)}([e._x,e._y]);D(p),r.lose.play(),setTimeout((function(){G(p.player.stats.xp,p.player.stats.gold),h(p),C("lose")}),2e3)}()}}function S(e,t){let n=[];const o=ROT.RNG.getItem([1,2,3,4,5,6]);o>3?(n.push(e.name+" hit "+t.name+"."),t.stats.hp-=o,r.hit.play()):(r.miss.play(),n.push(e.name+" missed "+t.name+".")),n&&X(function(e){const t=e.reduce((function(e,t){return e.concat(t.split(" ").map((function(e){const t=e.match(/hit|miss/);return I("span",{className:t?t[0]:""},[e," "])}))).concat(I("br",{}))}),[]);return I("span",{},t)}(n)),k(t)}const E="ontouchstart"in window?"touchstart":"click",A=document.querySelector.bind(document),M=document.querySelectorAll.bind(document);function _(e,t,o){A("canvas");const a=window.innerWidth<600?4:6,i=o.touchScreen?-20:0,r=e*-n.tileWidth+n.width*n.tileWidth/2-4,s=t*-n.tileHeight+n.height*n.tileHeight/2+i;canvas&&(canvas.style.transition="transform 0.5s ease-out 0s",o.display&&(o.display.getContainer().getContext("2d").imageSmoothingEnabled=!1),canvas.style.transform="scale("+a+") translate3d("+Math.floor(r)+"px,"+Math.floor(s)+"px,0px)")}function D(e){e.engine&&(e.lastArrow=null,clearInterval(e.arrowInterval),e.arrowInterval=null,e.engine.lock(),e.scheduler.clear(),window.removeEventListener("arrow",U),e.arrowListener=!1,window.onkeydown=null,window.onkeyup=null,A("#canvas").removeEventListener(E,q),document.ontouchstart=null,document.ontouchend=null,clearInterval(d))}function C(e,t){t&&t.preventDefault(),history.pushState(null,e,"#"+e);const n=A("#"+e),o=A("#"+e+">.action");document.querySelectorAll(".screen").forEach((function(e){e.classList.remove("show"),e.classList.add("hide")})),n.classList.remove("hide"),n.classList.remove("show"),n.offsetHeight,n.classList.add("show"),o&&o.focus()}function G(e,t){M(".xp-stat").forEach(t=>t.textContent=Math.floor(e)),M(".gold-stat").forEach(e=>e.textContent=t)}function H(e){const t=A("#inventory ul");t.innerHTML="",e.forEach((function(o,a){const i=n.tileMap[o[0]],r=o[1];Z(t,I("li",{onclick:N.bind(null,o,a,e),className:"inventory-item"},[I("div",{className:"sprite",style:"background-position: -"+i[0]+"px -"+i[1]+"px;"}),r]))}))}function N(e,t,n,o){X(e[1]+" selected"),P(o,!0)}function z(e){const t=A("#hud");t.innerHTML="";for(let n in e)Z(t,I("span",{},[n.toUpperCase()+": "+e[n]]))}function P(e,t){const n=e.target.className;if("sprite"!=n&&"inventory-item"!=n||t){e.preventDefault();const t=A("#inventory>span"),n=A("#inventory>div");return"none"==t.style.display?(t.style.display="block",n.style.display="none"):(t.style.display="none",n.style.display="block"),!1}}function X(e){const t=A("#message");p.scheduler._current!=p.player&&-1!=t.className.indexOf("show")||(t.innerHTML=""),t.classList.remove("fade-out"),t.classList.add("show"),"string"==typeof e?t.appendChild(I("span",{},[e])):t.appendChild(e)}function B(e){const t=A("#message");e?(t.classList.remove("show"),t.classList.remove("fade-out"),t.innerHTML=""):t.className.match("show")&&(t.classList.remove("show"),t.classList.add("fade-out"),t.onanimationend=function(){t.classList.remove("fade-out"),t.innerHTML=""})}function I(e,t,n){const o=document.createElement(e);for(a in t)o[a]=t[a];return(n||[]).forEach((function(e){"string"==typeof e?o.appendChild(document.createTextNode(e)):Z(o,e)})),o}function Z(e,t){return e.appendChild(t),t}function q(e){if(e.preventDefault(),p.touchScreen)return;const t=A("#game"),n=e.touches?e.touches[0].clientX:e.clientX,o=e.touches?e.touches[0].clientY:e.clientY,a=n-t.offsetWidth/2,i=o-t.offsetHeight/2-(game.touchScreen?-20:0)*window.devicePixelRatio,r=Math.ceil(Math.floor((Math.atan2(i,a)+Math.PI)/(Math.PI/4))%7/2);b(ROT.DIRS[8][l[r]])}function K(e){const t=e.keyCode;if(187==t||189==t)return void e.preventDefault();if(70==t&&e.altKey&&e.ctrlKey&&e.shiftKey)return document.body.requestFullscreen(),void console.log("Full screen pressed.");if(81==t)return void h(p);if(73==t)return void P(e,!0);if(190==t)return void p.engine.unlock();if(!(t in s))return;const n=ROT.DIRS[8][s[t]];p.display&&e.preventDefault(),F(n)}function W(e){if(e.preventDefault(),"btn-skip"==e.target.id)return void p.engine.unlock();F(ROT.DIRS[8][c[e.target.id]])}function F(e){const t=p.lastArrow;p.lastArrow=e,t||(document.dispatchEvent(new Event("arrow")),p.arrowInterval&&clearInterval(p.arrowInterval),p.arrowInterval=setInterval((function(){document.dispatchEvent(new Event("arrow"))}),200))}function Q(e){clearInterval(p.arrowInterval),p.arrowInterval=null,p.lastArrow=null}function U(){p.lastArrow?b(p.lastArrow):Q()}function J(){const e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];for(var t=0;t<e.length;t++){var n=e[t];if(n){const e={h:Math.round(n.axes[6]),v:Math.round(n.axes[7]),b:[0,1,3,4].map(e=>n.buttons[e].pressed)},t=u[n.id];t&&[["btn-left","h","btn-right"],["btn-up","v","btn-down"]].map(n=>{e[n[1]]!=t[n[1]]&&(0==e[n[1]]?Q():F(ROT.DIRS[8][c[n[e[n[1]]+1]]]))}),u[n.id]=e}}}function O(e){C("game"),r.rubber.play(),e.touches&&(A("#arrows").style.display="block",p.touchScreen=!0),f(p)}function j(e,t){t.preventDefault();C(e.getAttribute("value")),r.choice.play()}function Y(e){e.preventDefault(),C("title"),r.hide.play()}NodeList.prototype.forEach=Array.prototype.forEach,document.querySelectorAll(".game-title-text").forEach((function(e){e.textContent="My Rogue"})),A("#play").addEventListener(E,O),window.addEventListener("gamepadconnected",(function(e){console.log("Gamepad connected:",e)})),e.rbb?e.rbb.cleanup():(A("#plate").addEventListener("animationend",C.bind(null,"title")),document.querySelectorAll("#options #menu input").forEach((function(e){e.addEventListener("touchstart",j.bind(null,e)),e.addEventListener("click",j.bind(null,e))})),A("#inventory").addEventListener(E,P),document.querySelectorAll(".modal button.action").forEach((function(e){e.addEventListener(E,Y)})),window.onpopstate=function(e){p.engine?h(p):Y(e)}),e.rbb=p}(window);</script></body></html>
